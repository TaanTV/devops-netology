Домашнее задание к занятию "4.1. Командная оболочка Bash: Практические навыки"
1)
Есть скрипт:

a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
Какие значения переменным c,d,e будут присвоены?
Почему?

Ответ: 

administrator@ubuntu:~$ echo $c
a+b
Потому что это строчка

administrator@ubuntu:~$ echo $d
1+2
т.к. мы просим вывести значения a=1 и d=2.

administrator@ubuntu:~$ echo $e
3

т.к. это формула, тут мы просим в двойных скобках баш посчитать (сложить a+b).
2) На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:

while ((1==1)
do
curl https://localhost:4757
if (($? != 0))
then
date >> curl.log
fi
done

исправил: см. скрин "2 задание скрипт Домашнее задание к занятию 4.1. Командная оболочка Bash Практические навыки.jpg"
 
Текст исправлено скрипта
#!/usr/bin/env bash
while ((1==1))
do
curl http://localhost:4757
if (($? !=0))
then
date >> curl.log
exit 1
fi
done
3). Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

см. скрины "3 задание с коментарием скрипт Домашнее задание к занятию 4.1. Командная оболочка Bash Практические навыки.jpg"
 

"3 zadanie лог файл Домашнее задание к занятию 4.1. Командная оболочка Bash Практические навыки.jpg" (2 раза проверил для достоверности).
 

#!/usr/bin/bash

 for i in 192.168.0.1 173.194.222.113 87.250.250.242;  # присваиваем перемнной i наши IP адреса

 do                                                    # выполни
 count=5                                           # присваиваем перемнной count пятерку, далее это это кол-во нашего вывода
 while (($count > 0))                                  # выполняй по $count > 0
 do                                                    # выполни
 nc -zvw2 $i 80 >> /home/administrator/MyBash/log 2>&1 # используй команду nc -z сканируй порты v вербоус (вывод) w таймаут 2 переменная $i наши IP адреса (см. выше) и вывод допиши в нашу папку log

 let "count -=1"                                  # переведи слово в число и уменьшай значение на единицу

 done    
 done                                                  # конец цикла



Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается
#!/usr/bin/bash
см. скриншоты "4 задание скрипт Домашнее задание к занятию 4.1. Командная оболочка Bash Практические навыки.jpg"
 

"4 zadanie вывод Домашнее задание к занятию 4.1. Командная оболочка Bash Практические навыки.jpg"

 
СКРИПТ В ТЕКСТОВОМ ВИДЕ
while true; sleep 2 # зацикливаем постоянно скрипт с промежутком в 2 секунды

do   # выполни
nc -zvw2 192.168.0.1 80  # указанные IP   

nc -zvw 173.194.222.113 80

nc -zvw 87.250.250.242 80

if [[ $? != $0 ]]; then # если if  любой код выхода $? не равен != $0; то 

exit 1   # выходи из цикла
#break 2
fi   # закрыть условия

done    # конец while
done    # конец done
